{% extends 'base.html' %}

{% block content %}
{% load guardian_tags %}

    <h2>Tags</h2>

    {% if tags %}
        <ul>
            {% for tag in tags %}
            {% get_obj_perms request.user for tag as "tag_perms" %}
                <li>
                    {{ tag.name|safe }}

                    {% if 'view_guardedtag' in tag_perms %}
                        <a href="{% url 'tags:edit' tag.id %}">Edit</a>
                    {% else %}
                        <span style="color: grey;">Edit</span>
                    {% endif %}

                    {% if 'view_guardedtag' in tag_perms %}
                        <span id="del_tag({{ tag.id }})" style="display: inline;">
			                <a href="#" onclick="show_hide('confirm_del_tag({{ tag.id }})', 'del_tag({{ tag.id }})'); return false;">Delete</a>
		                </span>
                        <strong><span id="confirm_del_tag({{ tag.id }})" style="display: none;">
                            Confirm deleting tag:
                            <a style="color: red;" href="{% url 'tags:delete' tag.id %}">Yes</a>
                            /
                            <a href="#" onclick="show_hide('del_tag({{ tag.id }})', 'confirm_del_tag({{ tag.id }})'); return false;">No</a>
                        </span></strong>
                    {% else %}
                        <span style="color: grey;">Delete</span>
                    {% endif %}

                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No tags to display.</p>
    {% endif %}

	<script type="text/javascript" >
		function show_hide(show_id, hide_id){
			document.getElementById(show_id).style.display = 'inline';
			document.getElementById(hide_id).style.display = 'none';
        }
	</script>
{% endblock %}
